function ComicBubbles(ao){var ai=this,Y=arguments,a2=ao,aS,aR,ax,a4,au,an,ar,aN=(navigator.userAgent.toLowerCase().search("android")>-1||navigator.userAgent.toLowerCase().search("iphone")>-1)||false,aA={bubbleWidth:140,bubbleHeight:65,bgColor:"#ffffff",txtColor:"#000000",fontFamily:"Arial, Helvetica, sans-serif",fontSize:"15px",fontStyle:"normal",fontWeight:"normal",textAlign:"center",opacity:0.8,readonly:true,settable:true,bubbleStyle:-1},G={},aB=aA.bubbleWidth,m=aA.bubbleHeight,bh=aA.bgColor,n=aA.txtColor,aP=aA.fontFamily,aK=aA.fontSize,aG=aA.fontStyle,D=aA.fontWeight,A=aA.textAlign,E=aA.opacity,a5=aA.readonly,T=aA.settable,N=aA.bubbleStyle,aC=false,aX=false,aj=[],P=[],ah=6,ap=0,a8,a6=30,ae=-1,bi=10,a1="",aQ=0,a0,R=0.17,aU=document.createElement("div"),bp=["Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Comic Sans MS", cursive, sans-serif','"Courier New", Courier, monospace',"Georgia, serif","Impact, Charcoal, sans-serif",'"Lucida Console", Monaco, monospace','"Lucida Sans Unicode", "Lucida Grande", sans-serif','"Palatino Linotype", "Book Antiqua", Palatino, serif',"Tahoma, Geneva, sans-serif",'"Times New Roman", Times, serif','"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif"],aI={indianred:"#cd5c5c",lightcoral:"#f08080",salmon:"#fa8072",darksalmon:"#e9967a",lightsalmon:"#ffa07a",crimson:"#dc143c",red:"#ff0000",firebrick:"#b22222",darkred:"#8b0000",pink:"#ffc0cb",lightpink:"#ffb6c1",hotpink:"#ff69b4",deeppink:"#ff1493",mediumvioletred:"#c71585",palevioletred:"#db7093",lightsalmon:"#ffa07a",coral:"#ff7f50",tomato:"#ff6347",orangered:"#ff4500",darkorange:"#ff8c00",orange:"#ffa500",gold:"#ffd700",yellow:"#ffff00",lightyellow:"#ffffe0",lemonchiffon:"#fffacd",lightgoldenrodyellow:"#fafad2",papayawhip:"#ffefd5",moccasin:"#ffe4b5",peachpuff:"#ffdab9",palegoldenrod:"#eee8aa",khaki:"#f0e68c",darkkhaki:"#bdb76b",lavender:"#e6e6fa",thistle:"#d8bfd8",plum:"#dda0dd",violet:"#ee82ee",orchid:"#da70d6",fuchsia:"#ff00ff",magenta:"#ff00ff",mediumorchid:"#ba55d3",mediumpurple:"#9370db",amethyst:"#9966cc",blueviolet:"#8a2be2",darkviolet:"#9400d3",darkorchid:"#9932cc",darkmagenta:"#8b008b",purple:"#800080",indigo:"#4b0082",slateblue:"#6a5acd",darkslateblue:"#483d8b",mediumslateblue:"#7b68ee",greenyellow:"#adff2f",chartreuse:"#7fff00",lawngreen:"#7cfc00",lime:"#00ff00",limegreen:"#32cd32",palegreen:"#98fb98",lightgreen:"#90ee90",mediumspringgreen:"#00fa9a",springgreen:"#00ff7f",mediumseagreen:"#3cb371",seagreen:"#2e8b57",forestgreen:"#228b22",green:"#008000",darkgreen:"#006400",yellowgreen:"#9acd32",olivedrab:"#6b8e23",olive:"#808000",darkolivegreen:"#556b2f",mediumaquamarine:"#66cdaa",darkseagreen:"#8fbc8f",lightseagreen:"#20b2aa",darkcyan:"#008b8b",teal:"#008080",aqua:"#00ffff",cyan:"#00ffff",lightcyan:"#e0ffff",paleturquoise:"#afeeee",aquamarine:"#7fffd4",turquoise:"#40e0d0",mediumturquoise:"#48d1cc",darkturquoise:"#00ced1",cadetblue:"#5f9ea0",steelblue:"#4682b4",lightsteelblue:"#b0c4de",powderblue:"#b0e0e6",lightblue:"#add8e6",skyblue:"#87ceeb",lightskyblue:"#87cefa",deepskyblue:"#00bfff",dodgerblue:"#1e90ff",cornflowerblue:"#6495ed",mediumslateblue:"#7b68ee",royalblue:"#4169e1",blue:"#0000ff",mediumblue:"#0000cd",darkblue:"#00008b",navy:"#000080",midnightblue:"#191970",cornsilk:"#fff8dc",blanchedalmond:"#ffebcd",bisque:"#ffe4c4",navajowhite:"#ffdead",wheat:"#f5deb3",burlywood:"#deb887",tan:"#d2b48c",rosybrown:"#bc8f8f",sandybrown:"#f4a460",goldenrod:"#daa520",darkgoldenrod:"#b8860b",peru:"#cd853f",chocolate:"#d2691e",saddlebrown:"#8b4513",sienna:"#a0522d",brown:"#a52a2a",maroon:"#800000",white:"#ffffff",snow:"#fffafa",honeydew:"#f0fff0",mintcream:"#f5fffa",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",whitesmoke:"#f5f5f5",seashell:"#fff5ee",beige:"#f5f5dc",oldlace:"#fdf5e6",floralwhite:"#fffaf0",ivory:"#fffff0",antiquewhite:"#faebd7",linen:"#faf0e6",lavenderblush:"#fff0f5",mistyrose:"#ffe4e1",gainsboro:"#dcdcdc",lightgrey:"#d3d3d3",silver:"#c0c0c0",darkgray:"#a9a9a9",gray:"#808080",dimgray:"#696969",lightslategray:"#778899",slategray:"#708090",darkslategray:"#2f4f4f",black:"#000000"},bc="477066499943",bb="389990520674",c=0,d=false,k="",O=false,bn=document.getElementById(a2+"-comic-bubbles-output"),at="",bm,M,K,a9=false,Z=false,av=false,ac;this.action="auto";this.mouseX=0;this.mouseY=0;this.mX=0;this.mY=0;this.currentX=0;this.currentY=0;this.selectedBubbleID=0;this.insideTail=false;this.mousePressed=false;this.events_added=false;this.png_in_progress=false;this.encoded_canvas;this.bubbleStateChanged;function aE(bt,bv,i,bq,bw,p,by,bx,bs,bu,br){bt=bt||aP;bv=bv||aK;i=i||aG;bq=bq||D;bw=bw||n;p=p||"auto";by=by||"auto";bx=bx||"auto";bs=bs||"auto";bu=bu||"hidden";br=br||A;return"position: absolute !important; left: "+p+" !important; top: "+by+" !important; width: "+bx+" !important; height: "+bs+" !important; right: auto !important; bottom: auto !important; display: block; visibility: "+bu+" !important; text-align: "+br+" !important; border: 0 !important; margin: 0 !important; font-family: "+bt+"; font-size: "+bv+"; font-style: "+i+"; font-weight: "+bq+"; background-color: transparent !important; color: "+bw+"; outline: 0 solid transparent !important; overflow: hidden !important; word-wrap: break-word !important; overflow-wrap: break-word !important; white-space: normal !important"}function aY(){this.id="";this.x=ai.mouseX;this.y=ai.mouseY;this.width=aB;this.height=m;this.fill=bh;this.color=n;this.ellipse=av;this.tailLocation=-1;this.bubbleStyle=N;this.frame=false;this.fontFamily=aP;this.fontSize=aK;this.fontStyle=aG;this.fontWeight=D;this.textAlign=A;this.baselineFromTop=0;this.lineHeight=0;this.consoleText="";this.readonly=a5;this.settable=T;this.txtarea=document.createElement("p");this.txtarea.className="cb-bubble-field";this.txtarea.id=0;this.txtarea.style.cssText=aE();this.txtarea.innerHTML=k;this.txtarea.contentEditable=!a5;this.txtarea.spellcheck=false;this.NodeInsEvt=false;this.lettersCoordinates=[];this.tailX0=0;this.tailY0=0;this.tailX1=0;this.tailY1=0;this.tailX2=0;this.tailY2=0;this.tailX3=0;this.tailY3=0;this.tailX4=0;this.tailY4=0;this.tailX5=0;this.tailY5=0;this.tailX6=0;this.tailY6=0;this.tailX7=0;this.tailY7=0;this.opacity=E;this.name="";this.off=false;this.autoWidth=aC;this.autoHeight=aX;this.action_in_progress;this.postponed_actions=[];this.draw=function(bq){if(!this.off){au.fillStyle=w(this.fill,this.opacity);if(this.x>an||this.y>ar){return}if(this.x+this.width<0||this.y+this.height<0){return}C(this,bq);this.txtarea.style.cssText=aE(this.fontFamily,this.fontSize,this.fontStyle,this.fontWeight,this.color,this.x+"px",this.y+"px",this.width+"px",this.height+"px","visible",this.textAlign);au.fillStyle=this.color;au.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+" "+this.fontFamily;var p=this.txtarea,i=this;if(this.txtarea.innerHTML!=""){au.fillStyle=this.color;if(this.lettersCoordinates.length==0){aw(this)}if(ai.png_in_progress){bo(this)}else{if(!document.getElementById(this.txtarea.id)&&bq!=ae){bo(this)}}}}else{this.txtarea.style.cssText=aE(this.fontFamily,this.fontSize,this.fontStyle,this.fontWeight,this.color,this.x+"px",this.y+"px",this.width+"px",this.height+"px","hidden",this.textAlign);if(this.lettersCoordinates.length==0){aw(this)}}};this.drawSelectedBubble=function(bv,bu){if(this.off){return}au.globalCompositeOperation="source-atop";au.fillStyle=w(this.fill,this.opacity);if(this.x>an||this.y>ar){return}if(this.x+this.width<0||this.y+this.height<0){return}C(this,bv);au.globalCompositeOperation="source-over";this.txtarea.style.cssText=aE(this.fontFamily,this.fontSize,this.fontStyle,this.fontWeight,this.color,this.x+"px",this.y+"px",this.width+"px",this.height+"px","visible",this.textAlign);var p=this,bq=this.txtarea;if(this.frame){bq.onmousedown=function(i){ad(false);clearTimeout(a0)};bq.onmouseup=function(i){};bq.onkeydown=function(i){clearTimeout(a0)};bq.onkeypress=function(i){if(i.which==13){if(i.shiftKey&&!bl()){i.preventDefault()}}};if(!p.NodeInsEvt){bq.addEventListener("DOMNodeInserted",function(){ai.applyStyleToChild(p)},false);p.NodeInsEvt=true}bq.onkeyup=function(i){clearTimeout(a0);a0=setTimeout(function(){aw(p);a0=null;aH()},500)};bq.onpaste=function(bB){bB.preventDefault();var bC="";if(bB.clipboardData){bC=bB.clipboardData.getData("text/plain")}else{if(window.clipboardData){bC=window.clipboardData.getData("Text")}else{if(bB.originalEvent.clipboardData){bC=bB.originalEvent.clipboardData.getData("text")}}}if(document.queryCommandSupported("insertText")){document.execCommand("insertHTML",false,bC)}else{var bw,bA,bz=bC;if(window.getSelection){bw=window.getSelection();if(bw.getRangeAt&&bw.rangeCount){bA=bw.getRangeAt(0);bA.deleteContents();var bx=document.createElement("div");bx.innerHTML=bz;var bD=document.createDocumentFragment(),by,i;while(by=bx.firstChild){i=bD.appendChild(by)}bA.insertNode(bD);if(i){bA=bA.cloneRange();bA.setStartAfter(i);bA.collapse(true);bw.removeAllRanges();bw.addRange(bA)}}}else{if(document.selection&&document.selection.type!="Control"){document.selection.createRange().pasteHTML(bz)}}}clearTimeout(a0);a0=setTimeout(function(){aw(p);a0=null;aH()},200)};if(O&&!this.readonly){au.fillStyle="red";au.strokeStyle="red";if(aN){au.globalAlpha=0.2;au.fillRect(this.x-ah,this.y-ah,this.width+ah*2,this.height+ah*2)}au.globalAlpha=1;au.lineWidth=2;au.strokeRect(this.x-1,this.y-1,this.width+2,this.height+2);var bt=ah/2,bs=1;P[0].x=this.x-ah+bs-1;P[0].y=this.y-ah+bs-1;P[1].x=this.x+this.width/2-bt;P[1].y=this.y-ah+bs-1;P[2].x=this.x+this.width-bs+1;P[2].y=this.y-ah+bs-1;P[3].x=this.x-ah+bs-1;P[3].y=this.y+this.height/2-bt;P[4].x=this.x+this.width-bs+1;P[4].y=this.y+this.height/2-bt;P[5].x=this.x-ah+bs-1;P[5].y=this.y+this.height-bs+1;P[6].x=this.x+this.width/2-bt;P[6].y=this.y+this.height-bs+1;P[7].x=this.x+this.width-bs+1;P[7].y=this.y+this.height-bs+1;for(var bs=0;bs<8;bs++){var br=P[bs];if(aN){au.lineWidth=2;au.beginPath();au.arc(br.x+ah/2,br.y+ah/2,ah/2,0,Math.PI*2,true);au.closePath();au.stroke()}else{au.fillRect(br.x,br.y,ah,ah)}}if(this.ellipse){if(aN){au.beginPath();au.arc(P[8].x+ah/2,P[8].y+ah/2,ah/2,0,Math.PI*2,true);au.closePath();au.stroke()}else{au.lineWidth=2;au.strokeRect(P[8].x-1,P[8].y-1,ah+2,ah+2)}}if(bu==1&&this.settable&&ac&&ab()){ac.addSettingsBox(this.x,this.y+this.height)}}if(ai.mousePressed&&ai.action!="auto"&&ai.action!="pointer"){if(a9){this.txtarea.style.pointerEvents="none"}else{if(document.getElementById(this.txtarea.id)){ax.removeChild(this.txtarea)}}}else{if(!document.getElementById(this.txtarea.id)){ax.appendChild(this.txtarea);this.NodeInsEvt=false}}au.font=this.fontStyle+" "+this.fontWeight+" "+this.fontSize+" "+this.fontFamily;au.fillStyle=this.color;if(bq.innerHTML!=""){if(!d&&!document.getElementById(bq.id)){if(ai.action!="move"&&ai.action!="crosshair"){aO(this)}bo(this)}}}};this.setId=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setId",p:i,callback:bq})}else{if(I(this,i)){ak()}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getId=function(){return this.id};this.setName=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setName",p:i,callback:bq})}else{this.name=i;ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getName=function(){return this.name};this.setText=function(bq,br){if(this.action_in_progress){this.postponed_actions.push({f:"setText",p:bq,callback:br})}else{this.txtarea.innerHTML=H(bq);this.lettersCoordinates=[];if(this.autoWidth||this.autoHeight){var i=x(this);if(this.autoWidth){this.width=i.width}if(this.autoHeight){this.height=i.height}}b();if(typeof br==="function"){br(this.getBubbleSettings())}}return this};this.getText=function(){if(this.consoleText==""){aw(this)}return this.consoleText.replace(/<br>/gi,"\n").replace(/&nbsp;/g," ")};this.setX=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setX",p:i,callback:bq})}else{if(a3("x",i,this)){this.lettersCoordinates=[];ak()}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getX=function(){return this.x};this.setY=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setY",p:i,callback:bq})}else{if(a3("y",i,this)){this.lettersCoordinates=[];ak()}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getY=function(){return this.y};this.setWidth=function(bq,br){if(this.action_in_progress){this.postponed_actions.push({f:"setWidth",p:bq,callback:br})}else{if(bq=="auto"){this.autoWidth=true;var i=x(this);this.width=i.width;this.lettersCoordinates=[];ak()}else{this.autoWidth=false;if(a3("width",bq,this)){if(!this.autoHeight){aF(this,this.height)}this.lettersCoordinates=[];ak()}}if(typeof br==="function"){br(this.getBubbleSettings())}}return this};this.getWidth=function(){return this.width};this.setHeight=function(bq,br){if(this.action_in_progress){this.postponed_actions.push({f:"setHeight",p:bq,callback:br})}else{if(bq=="auto"){this.autoHeight=true;var i=x(this);this.height=i.height;this.lettersCoordinates=[];ak()}else{this.autoHeight=false;if(a3("height",bq,this)){this.lettersCoordinates=[];ak()}}if(typeof br==="function"){br(this.getBubbleSettings())}}return this};this.getHeight=function(){return this.height};this.setFontFamily=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setFontFamily",p:i,callback:bq})}else{this.fontFamily=az(i);this.lettersCoordinates=[];al(this);ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getFontFamily=function(){return this.fontFamily};this.setFontSize=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setFontSize",p:i,callback:bq})}else{this.fontSize=a(i);this.lettersCoordinates=[];al(this);ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getFontSize=function(){return parseInt(this.fontSize)};this.setFontStyle=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setFontStyle",p:i,callback:bq})}else{this.fontStyle=aW(i);this.lettersCoordinates=[];al(this);ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getFontStyle=function(){return this.fontStyle};this.setFontWeight=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setFontWeight",p:i,callback:bq})}else{this.fontWeight=g(i);this.lettersCoordinates=[];al(this);ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getFontWeight=function(){return this.fontWeight};this.setTextAlign=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setTextAlign",p:i,callback:bq})}else{this.textAlign=Q(i);this.lettersCoordinates=[];al(this);ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getTextAlign=function(){return this.textAlign};this.setBackground=function(i,br){if(this.action_in_progress){this.postponed_actions.push({f:"setBackground",p:i,callback:br})}else{var bq=bg(i)||bh;this.fill=bq;ak();if(typeof br==="function"){br(this.getBubbleSettings())}}return this};this.getBackground=function(){return this.fill};this.setColor=function(i,br){if(this.action_in_progress){this.postponed_actions.push({f:"setColor",p:i,callback:br})}else{var bq=bg(i)||n;this.color=bq;ak();if(typeof br==="function"){br(this.getBubbleSettings())}}return this};this.getColor=function(){return this.color};this.setOpacity=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setOpacity",p:i,callback:bq})}else{if(a3("opacity",i,this)){ak()}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getOpacity=function(){return this.opacity};this.setReadonly=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setReadonly",p:i,callback:bq})}else{if(a3("readonly",i,this)){ak()}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.isReadonly=function(){return this.readonly};this.setSettable=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setSettable",p:i,callback:bq})}else{if(a3("settable",i,this)){ak()}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.isSettable=function(){return this.settable};this.setTailLocation=function(bq,br){if(this.action_in_progress){this.postponed_actions.push({f:"setTailLocation",p:bq,callback:br})}else{if(this.tailLocation>-1){var i=bf(bq);this.tailLocation=i;this["tailX"+i]=s(this);this["tailY"+i]=r(this);ak()}if(typeof br==="function"){br(this.getBubbleSettings())}}return this};this.getTailLocation=function(){if(this.bubbleStyle>-1){return B(this.tailLocation)}else{return""}};this.setTailX=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setTailX",p:i,callback:bq})}else{if(this.tailLocation>-1){if(a3("tailX",i,this)){ak()}}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getTailX=function(){if(this.tailLocation>-1){return this["tailX"+this.tailLocation]}else{return""}};this.setTailY=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setTailY",p:i,callback:bq})}else{if(this.tailLocation>-1){if(a3("tailY",i,this)){ak()}}if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getTailY=function(){if(this.tailLocation>-1){return this["tailY"+this.tailLocation]}else{return""}};this.setBubbleStyle=function(i,bq){if(this.action_in_progress){this.postponed_actions.push({f:"setBubbleStyle",p:i,callback:bq})}else{this.bubbleStyle=be(i);if(this.tailLocation==-1){this.ellipse=true;this.tailLocation=7;this.tailX7=s(this);this.tailY7=r(this)}if(this.bubbleStyle==-1){this.ellipse=false;this.tailLocation==-1}else{this.ellipse=true}ak();if(typeof bq==="function"){bq(this.getBubbleSettings())}}return this};this.getBubbleStyle=function(){return aT(this.bubbleStyle)};this.show=function(i){if(this.action_in_progress){this.postponed_actions.push({f:"show",p:"",callback:i})}else{this.off=false;ak();if(typeof i==="function"){i(this.getBubbleSettings())}}return this};this.hide=function(i){if(this.action_in_progress){this.postponed_actions.push({f:"hide",p:"",callback:i})}else{this.off=true;ak();if(typeof i==="function"){i(this.getBubbleSettings())}}return this};this.isVisible=function(){return !this.off};this.fadeIn=function(bq,by){if(this.action_in_progress){this.postponed_actions.push({f:"fadeIn",p:bq,callback:by})}else{var bt=this,bx=bt.opacity,br=0.02,bz=bx/br,bs=bt.color,i,bv,bw,bu=0,bA=1000;if(typeof bq!=="function"){bA=bq||1000;bA=parseInt(bA)<a6?a6:parseInt(bA)}i=L(bs);bv=S(bs);bw=V(bs);bt.off=false;bt.opacity=0;bt.color="rgba("+i+","+bv+","+bw+","+0+")";bt.action_in_progress=setInterval(function(){if(bt.opacity+br<=bx){bt.opacity=bt.opacity+br;bu=bu+((100/bz)/100);if(bu>1){bu=1}bt.color="rgba("+i+","+bv+","+bw+","+bu+")";b()}else{bt.opacity=bx;bt.color=bs;b();clearInterval(bt.action_in_progress);bt.action_in_progress=null;h(bt);if(typeof bq==="function"){bq(bt.getBubbleSettings())}else{if(typeof by==="function"){by(bt.getBubbleSettings())}}}},bA/bz)}return this};this.fadeOut=function(bq,by){if(this.action_in_progress){this.postponed_actions.push({f:"fadeOut",p:bq,callback:by})}else{var bt=this,bx=bt.opacity,br=0.02,bz=bx/br,bs=bt.color,i,bv,bw,bu=1,bA=1000;if(typeof bq!=="function"){bA=bq||1000;bA=parseInt(bA)<a6?a6:parseInt(bA)}i=L(bs);bv=S(bs);bw=V(bs);bt.action_in_progress=setInterval(function(){if(bt.opacity-br>=0){bt.opacity=bt.opacity-br;bu=bu-((100/bz)/100);if(bu<0){bu=0}bt.color="rgba("+i+","+bv+","+bw+","+bu+")";b()}else{bt.off=true;bt.opacity=bx;bt.color=bs;b();clearInterval(bt.action_in_progress);bt.action_in_progress=null;h(bt);if(typeof bq==="function"){bq(bt.getBubbleSettings())}else{if(typeof by==="function"){by(bt.getBubbleSettings())}}}},bA/bz)}return this};this.moveTo=function(by,bw,bB,bz){if(this.action_in_progress){this.postponed_actions.push({f:"moveTo",px:by,py:bw,pt:bB,callback:bz})}else{by=isNaN(parseInt(by))?this.x:parseInt(by);bw=isNaN(parseInt(bw))?this.y:parseInt(bw);var bx=Math.abs(by-this.x),bv=Math.abs(bw-this.y),p=800;if(bx>0||bv>0){var bt=Math.sqrt(Math.pow(bx,2)+Math.pow(bv,2)),bu=0;if(typeof bB!=="function"){if(bB=="fastest"){p=0}else{if(bB=="faster"){p=100}else{if(bB=="fast"){p=300}else{if(bB=="slow"){p=1600}else{if(bB=="slower"){p=3000}else{if(bB=="slowest"){p=6000}else{p=800}}}}}}}var bq=this,bs=bq.x,br=bq.y,i=bt>50?10:bt/5,bA=bt/i;bq.action_in_progress=setInterval(function(){if(bu<bt){if(bu==0){bq.lettersCoordinates=[];b()}bu=bu+i;var bF=bx/bt*bu;var bC=bv/bt*bu;if(by>bs){bF=bs+bF;if(bF>by){bF=by}}else{bF=bs-bF;if(bF<by){bF=by}}if(bw>br){bC=br+bC;if(bC>bw){bC=bw}}else{bC=br-bC;if(bC<bw){bC=bw}}if(p==0){bF=by;bC=bw}bF=Math.round(bF);bC=Math.round(bC);var bE=bF-bq.x;var bD=bC-bq.y;bq.x=bF;bq.y=bC;if(bq.ellipse){bq["tailX"+bq.tailLocation]=bq["tailX"+bq.tailLocation]+bE;bq["tailY"+bq.tailLocation]=bq["tailY"+bq.tailLocation]+bD}b()}else{bq.x=by;bq.y=bw;bq.lettersCoordinates=[];b();clearInterval(bq.action_in_progress);bq.action_in_progress=null;h(bq);if(typeof bB==="function"){bB(bq.getBubbleSettings())}else{if(typeof bz==="function"){bz(bq.getBubbleSettings())}}}},p/bA)}}return this};this.delay=function(br,bs){var i=this;if(this.action_in_progress){this.postponed_actions.push({f:"delay",p:br,callback:bs})}else{var bq=1000;if(typeof br!=="function"){bq=br||1000;bq=parseInt(bq)<a6?a6:parseInt(bq)}i.action_in_progress=setTimeout(function(){i.action_in_progress=null;h(i);if(typeof br==="function"){br(i.getBubbleSettings())}else{if(typeof bs==="function"){bs(i.getBubbleSettings())}}},bq)}return this};this.remove=function(br){if(this.action_in_progress){this.postponed_actions.push({f:"remove",p:"",callback:br});return this}else{var p=-1;for(var bq=0;bq<aj.length;bq++){if(this===aj[bq]){p=bq}}if(p>-1){if(document.getElementById(this.txtarea.id)){ax.removeChild(this.txtarea)}aj.splice(p,1)}b();if(typeof br==="function"){br({bubbleState:"removed"})}}};this.onMouseEvent=function(bt,bq){if(typeof bt==="function"){bq=bq||"click";var p=bq.split(",");for(var br=0;br<p.length;br++){var bs=p[br].trim();if(bs=="click"||bs=="mousedown"||bs=="mouseup"||bs=="mouseover"||bs=="mouseout"){if(!document.getElementById(this.txtarea.id)){ax.appendChild(this.txtarea)}this.txtarea.className="cb-bubble-field clickable";this.txtarea["on"+bs]=function(i){i.stopPropagation?i.stopPropagation():(i.cancelBubble=true);bt()}}}}return this};this.offMouseEvent=function(bt,bq){bq=bq||"click";var p=bq.split(",");for(var br=0;br<p.length;br++){var bs=p[br].trim();if(bs=="click"||bs=="mousedown"||bs=="mouseup"||bs=="mouseover"||bs=="mouseout"){this.txtarea.className="cb-bubble-field";this.txtarea["on"+bs]="";if(typeof bt==="function"){bt()}}}return this};this.getBubbleSettings=function(){return{id:this.id,name:this.getName(),text:this.getText(),x:this.getX(),y:this.getY(),width:this.getWidth(),height:this.getHeight(),fontFamily:this.getFontFamily(),fontSize:this.getFontSize(),fontStyle:this.getFontStyle(),fontWeight:this.getFontWeight(),textAlign:this.getTextAlign(),background:this.getBackground(),color:this.getColor(),opacity:this.getOpacity(),readonly:this.isReadonly(),settable:this.isSettable(),visible:this.isVisible(),bubbleStyle:aT(this.bubbleStyle),tailLocation:B(this.tailLocation),tailX:this["tailX"+this.tailLocation],tailY:this["tailY"+this.tailLocation]}}}function I(bs,p){var br=(p&&p!="")?true:false;if(br){for(var bq=0;bq<aj.length;bq++){if(aj[bq].id==p){br=false}}if(br){bs.id=p}}if(!br){console.log("Bubble id cannot be changed")}return br}function al(p){if(p.autoWidth||p.autoHeight){var i=x(p);if(p.autoWidth){p.width=i.width}if(p.autoHeight){p.height=i.height}}}function x(br){var bs=(br.autoWidth)?"auto":br.width+"px";var p=(br.autoHeight)?"auto":br.height+"px";a7(true);a1.style.cssText=aE(br.fontFamily,br.fontSize,br.fontStyle,br.fontWeight,null,"-9999px","-9999px",bs,p,"hidden",br.textAlign);a1.innerHTML=br.txtarea.innerHTML;var i=parseInt(a1.offsetWidth+2);if(i<bi){i=bi}var bq=parseInt(a1.offsetHeight);if(bq<bi){bq=bi}return{width:i,height:bq}}function bl(){var bq=window.navigator.userAgent,i=bq.indexOf("MSIE "),p=bq.indexOf("Trident/");if((i>-1)||(p>-1)){return true}else{return false}}function J(){this.x=0;this.y=0}function h(bu){for(var bs=0;bs<bu.postponed_actions.length;bs++){var bt=bu.postponed_actions[bs].f;var bx=bu.postponed_actions[bs].callback||0;if(bt!="moveTo"){var bw=bu.postponed_actions[bs].p;if(bt=="fadeIn"||bt=="fadeOut"||bt=="delay"){bu.postponed_actions.splice(0,bs+1)}if(bw==""){bu[bt](bx)}else{bu[bt](bw,bx)}if(bt=="fadeIn"||bt=="fadeOut"||bt=="delay"){break}}else{var br=bu.postponed_actions[bs].px;var bq=bu.postponed_actions[bs].py;var bv=bu.postponed_actions[bs].pt;bu.postponed_actions.splice(0,bs+1);bu[bt](br,bq,bv,bx);break}}}function s(p){var i=0;switch(p.tailLocation){case 0:i=p.x-60;break;case 1:i=p.x+p.width/2;break;case 2:i=p.x+p.width+60;break;case 3:i=p.x-80;break;case 4:i=p.x+p.width+80;break;case 5:i=p.x-60;break;case 6:i=p.x+p.width/2;break;case 7:i=p.x+p.width+60;break}return i}function r(p){var i=0;switch(p.tailLocation){case 0:i=p.y-60;break;case 1:i=p.y-80;break;case 2:i=p.y-60;break;case 3:i=p.y+p.height/2;break;case 4:i=p.y+p.height/2;break;case 5:i=p.y+p.height+60;break;case 6:i=p.y+p.height+80;break;case 7:i=p.y+p.height+60;break}return i}function aa(){au.clearRect(0,0,an,ar);if(Z){var p=ax.getElementsByClassName("cb-bubble-field");if(p.length>0){for(var bq=0;bq<p.length;bq++){if(p[bq].id!=a2+"-temp-bubble-container"){ax.removeChild(p[bq])}}}}if(aU.parentNode!==null){ax.removeChild(aU);document.getElementById(a2+"-comic-bubbles-wrapper").style.overflow="hidden"}}var bj=function(i,br){try{var bq=parseInt(i).toString(30),p=parseInt(br).toString(30);return this[bq][p].indexOf(ai[String.fromCharCode(67,66,78,97,109,101)]())>-1?1:0}catch(bs){return 0}};function bf(p){var i=7;switch(p){case"nw":i=0;break;case"n":i=1;break;case"ne":i=2;break;case"w":i=3;break;case"e":i=4;break;case"sw":i=5;break;case"s":i=6;break;case"se":i=7;break}return i}function B(p){var i;switch(p){case 0:i="nw";break;case 1:i="n";break;case 2:i="ne";break;case 3:i="w";break;case 4:i="e";break;case 5:i="sw";break;case 6:i="s";break;case 7:i="se";break}return i}function be(p){var i=-1;if(p.toLowerCase()=="speak"){i=0}else{if(p.toLowerCase()=="think"){i=1}else{if(p.toLowerCase()=="scream"){i=2}else{if(p.toLowerCase()=="arrow"){i=3}}}}return i}function aT(p){var i="none";if(p==0){i="speak"}else{if(p==1){i="think"}else{if(p==2){i="scream"}else{if(p==3){i="arrow"}}}}return i}function aZ(){var p=false;if(typeof ComicBubblesEditor!=="undefined"&&typeof ComicBubblesEditor==="function"){try{var bs=[108,111,99,97,116,105,111,110,46,104,111,115,116];ac=new ComicBubblesEditor(ai,ax,a4,au,an,ar,aj,aU,bp,aI,aN,P,ah,ap,bi,bj,bc,bb,bs);ac.Settings(function(){ac.setEventListeners(true)})}catch(br){ac=null;p=true;console.log("ComicBubblesEditorError: "+br)}}else{p=true;console.log("ComicBubblesEditor doesn't exist")}if(p){a5=true;for(var bq=0;bq<aj.length;bq++){aj[bq].readonly=true}}}function a3(bs,bx,bu){var bw=parseInt(bx)||0,bq=false;switch(bs){case"x":if(bw>=0&&bw<an){bu.x=bw;bq=true}break;case"y":if(bw>=0&&bw<ar){bu.y=bw;bq=true}break;case"width":if(bw>=bi&&bw<=an){if(bu){bu.width=bw;bq=true}else{aB=bw}}break;case"height":if(bw>=bi&&bw<=ar){if(bu){bu.height=bw;bq=true}else{m=bw}}break;case"opacity":var bv=isNaN(parseFloat(bx))?1:parseFloat(bx);if(bv>=0&&bv<=1){if(bu){bu.opacity=bv}else{E=bv}}else{if(bu){bu.opacity=1}else{E=1}}bq=true;break;case"tailX":if(bu.tailLocation>-1&&bu.tailLocation<8){var bv=isNaN(parseFloat(bx))?-1:parseFloat(bx);if(bv>=0&&bv<an){bu["tailX"+bu.tailLocation]=bv;bq=true}}break;case"tailY":if(bu.tailLocation>-1&&bu.tailLocation<8){var bv=isNaN(parseFloat(bx))?-1:parseFloat(bx);if(bv>=0&&bv<ar){bu["tailY"+bu.tailLocation]=bv;bq=true}}break;case"readonly":if((typeof(bx)==="boolean"&&bx)||bx==1){if(bu){bu.readonly=true;bu.txtarea.contentEditable=false;bq=true}else{a5=true}}else{if((typeof(bx)==="boolean"&&!bx)||bx==0){if(bu){bu.readonly=false;bu.txtarea.contentEditable=true;bq=true}else{a5=false}}}var bt=a5;for(var br=0;br<aj.length;br++){if(!aj[br].readonly){bt=false}}if(a5&&bt){if(ai.events_added&&ac){ac.setEventListeners(false)}}else{if(!ai.events_added){aZ()}}break;case"settable":if((typeof(bx)==="boolean"&&bx)||bx==1){if(bu){bu.settable=true;bq=true}else{T=true}}else{if((typeof(bx)==="boolean"&&!bx)||bx==0){if(bu){bu.settable=false;bq=true}else{T=false}}}break;case"visible":if((typeof(bx)==="boolean"&&bx)||bx==1){bu.off=false;bq=true}else{if((typeof(bx)==="boolean"&&!bx)||bx==0){bu.off=true;bq=true}}break}return bq}function ab(){var bq=location.host.indexOf("comicbubbles")>-1?1:0;if(!bq){for(var p=0;p<aj.length;p++){aj[p].readonly=true}b()}return bq}function bk(p){var i=p.consoleText.replace(/<br>/gi,"\n");var bq="id: '"+p.id+"'";if(p.name!=""){bq+=", name: '"+p.name+"'"}bq+=", text: "+JSON.stringify(i)+", x: "+p.x+", y: "+p.y;if(!aC){if(p.autoWidth){bq+=", width: 'auto'"}else{if(p.width!=aA.bubbleWidth){bq+=", width: "+p.width}}}else{if(!p.autoWidth){bq+=", width: "+p.width}}if(!aX){if(p.autoHeight){bq+=", height: 'auto'"}else{if(p.height!=aA.bubbleHeight){bq+=", height: "+p.height}}}else{if(!p.autoHeight){bq+=", height: "+p.height}}if(p.fontFamily!=aA.fontFamily){bq+=", fontFamily: '"+p.fontFamily+"'"}if(p.fontSize!=aA.fontSize){bq+=", fontSize: '"+p.fontSize+"'"}if(p.fontStyle!=aA.fontStyle){bq+=", fontStyle: '"+p.fontStyle+"'"}if(p.fontWeight!=aA.fontWeight){bq+=", fontWeight: '"+p.fontWeight+"'"}if(p.textAlign!=aA.textAlign){bq+=", textAlign: '"+p.textAlign+"'"}if(p.fill!=aA.bgColor){bq+=", background: '"+p.fill+"'"}if(p.color!=aA.txtColor){bq+=", color: '"+p.color+"'"}if(p.opacity!=aA.opacity){bq+=", opacity: "+p.opacity}if(p.readonly!=aA.readonly){bq+=", readonly: "+p.readonly}if(p.settable!=aA.settable){bq+=", settable: "+p.settable}if(p.off==true){bq+=", visible: "+!p.off}if(p.bubbleStyle>-1&&p.tailLocation>-1){if(p.bubbleStyle!=aA.bubbleStyle){bq+=", bubbleStyle: '"+aT(p.bubbleStyle)+"'"}bq+=", tailLocation: '"+B(p.tailLocation)+"', tailX: "+p["tailX"+p.tailLocation]+", tailY: "+p["tailY"+p.tailLocation]}at=at+"<span style='white-space: pre-wrap !important;'>{"+bq+"}</span>,<br>"}function aH(){if(bn){clearTimeout(bm);bm=setTimeout(function(){at="";var bs=aj.length,bv="",br="",bw="",p="";for(var bx in aA){if(aA.hasOwnProperty(bx)){var bt=bx.replace("bubbleWidth","width").replace("bubbleHeight","height").replace("bgColor","background").replace("txtColor","color");if((bt=="width"&&aC)||(bt=="height"&&aX)){p+=bt+": 'auto', "}else{if(aA[bx]!=G[bx]){var bq=aA[bx];if(bt=="bubbleStyle"){bq=aT(bq)}if(bt!="opacity"&&bt!="readonly"&&bt!="settable"&&bt!="visible"){bq="'"+bq+"'"}p+=bt+": "+bq+", "}}}}if(p!=""){p=", {canvas: {"+p.substr(0,(p.length-2))+"}}"}for(var bu=0;bu<bs;bu++){bk(aj[bu])}if(bs>1){bv="[";br="]"}if(at!=""){bw=", {bubble: "+bv+"<br>"+at.slice(0,-5)+"<br>"+br+"}"}bn.innerHTML='new ComicBubbles("'+a2+'"'+p+bw+");"},500)}if(ai.bubbleStateChanged&&ac){if(!ai.png_in_progress){ac.bStateChanged()}}}this.updateConsole=function(){aH()};this.edi=function(){return ac};function b(){if(!ai.mousePressed){setTimeout(function(){if(!ai.mousePressed){clearInterval(a8)}},3000)}c=0;if(a0==null&&au!=null){aa();var p=aj.length;for(var br=0;br<p;br++){aj[br].draw(br);if(ae!=br){aj[br].txtarea.style.pointerEvents="none"}}if(!ai.mousePressed){clearInterval(a8)}if(ae>-1){aj[ae].drawSelectedBubble(ae,1)}else{if(!ai.mousePressed&&!Z){var bq=document.createDocumentFragment();for(var br=0;br<p;br++){aj[br].txtarea.style.pointerEvents="none";if(aj[br].readonly){aj[br].txtarea.style.pointerEvents="auto"}if(!document.getElementById(aj[br].txtarea.id)){bq.appendChild(aj[br].txtarea)}}ax.appendChild(bq)}}aH()}try{if(!bj(bc,bb)){ai[String.fromCharCode(101,100,105)]().setEventListeners(false)}}catch(bs){}clearTimeout(K);K=setTimeout(function(){a7(false)},500)}this.refreshBubbles=function(){b()};function a7(p){var bq=document.getElementById(a2+"-temp-bubble-container");if(p&&!bq){ax.appendChild(a1)}if(!p&&bq){try{a1.parentNode.removeChild(a1)}catch(i){}}}function ak(){O=false;clearTimeout(M);M=setTimeout(function(){b()},10)}function ad(i){clearInterval(a8);if(i){a8=setInterval(b,a6)}}this.refreshBubbleCanvas=function(i){ad(i)};this.drawBubble=function(){var i=new aY();aj.push(i);var p=new Date().getTime()+aj.length;i.id="b"+p;i.txtarea.id=a2+"-"+p;i.autoWidth=false;i.autoHeight=false;if(av){i.tailLocation=bf("se");i["tailX"+i.tailLocation]=s(i);i["tailY"+i.tailLocation]=r(i)}a4.style.cursor="auto";ae=aj.length-1};this.enableTextDrawing=function(){Z=true};this.disableTextDrawing=function(){Z=false};this.isTextDrawn=function(){return Z};this.getBubbleById=function(br){var bq=aj.length,p=null;for(var bs=0;bs<bq;bs++){if(aj[bs].id==br){p=aj[bs];break}}if(p!==null){return p}else{console.log("Bubble "+br+" doesn't exist");return new aY()}};this.getBubblesByName=function(bs){var p=aj.length,br=[];for(var bq=0;bq<p;bq++){if(aj[bq].name==bs){br.push(aj[bq])}}return br};this.getAllBubbles=function(){return aj};this.addBubble=function(p,bt){var bq="";if(typeof p==="object"&&"id" in p){for(var br=0;br<aj.length;br++){if(aj[br].id==p.id){bq=br}}}if(bq==""){var bs=bd(p);if(typeof bt==="function"){if(aj.indexOf(bs)>-1){bt(bs.getBubbleSettings())}else{bt("new bubble error")}}setTimeout(function(){b()},50);return bs}else{if(typeof bt==="function"){bt("bubble "+p.id+" already exists")}return aj[bq]}};this.setText=function(i){k=H(i);return this};this.getText=function(){return k.replace(/<br>/gi,"\n").replace(/&nbsp;/g," ")};this.setWidth=function(i){if(i=="auto"){aC=true}else{aC=false;a3("width",i,null);aA.bubbleWidth=aB}return this};this.getWidth=function(){return aA.bubbleWidth};this.setHeight=function(i){if(i=="auto"){aX=true}else{aX=false;a3("height",i,null);aA.bubbleHeight=m}return this};this.getHeight=function(){return aA.bubbleHeight};this.setFontFamily=function(i){aP=az(i);if(arguments.length==1){aA.fontFamily=aP}return this};this.getFontFamily=function(){return aA.fontFamily};this.setFontSize=function(i){aK=a(i);if(arguments.length==1){aA.fontSize=aK}return this};this.getFontSize=function(){return parseInt(aA.fontSize)};this.setFontStyle=function(i){aG=aW(i);if(arguments.length==1){aA.fontStyle=aG}return this};this.getFontStyle=function(){return aA.fontStyle};this.setFontWeight=function(i){D=g(i);if(arguments.length==1){aA.fontWeight=D}return this};this.getFontWeight=function(){return aA.fontWeight};this.setTextAlign=function(i){A=Q(i);if(arguments.length==1){aA.textAlign=A}return this};this.getTextAlign=function(){return aA.textAlign};this.setBackground=function(i){bh=bg(i)||bh;if(arguments.length==1){aA.bgColor=bh}return this};this.getBackground=function(){return aA.bgColor};this.setColor=function(i){n=bg(i)||n;if(arguments.length==1){aA.txtColor=n}return this};this.getColor=function(){return aA.txtColor};this.setOpacity=function(i){a3("opacity",i,null);if(arguments.length==1){aA.opacity=E}return this};this.getOpacity=function(){return aA.opacity};this.setReadonly=function(i){a3("readonly",i,null);aA.readonly=a5;return this};this.isReadonly=function(){return aA.readonly};this.setSettable=function(i){a3("settable",i,null);aA.settable=T;return this};this.isSettable=function(){return aA.settable};this.setBubbleStyle=function(bq){var i=be(bq);if(i!=-1){av=true}aA.bubbleStyle=N=i};this.getBubbleStyle=function(){return aT(aA.bubbleStyle)};this.getDefaultSettings=function(){return{text:this.getText(),width:this.getWidth(),height:this.getHeight(),fontFamily:this.getFontFamily(),fontSize:this.getFontSize(),fontStyle:this.getFontStyle(),fontWeight:this.getFontWeight(),textAlign:this.getTextAlign(),background:this.getBackground(),color:this.getColor(),opacity:this.getOpacity(),readonly:this.isReadonly(),settable:this.isSettable()}};this.getBID=function(){return ae};this.setBID=function(i){ae=i};this.getTextDrawingCount=function(){return c};this.enableEditing=function(){O=true};this.onBubbleStateChange=function(i){if(typeof i==="function"){ai.bubbleStateChanged=i}return this};this.applyStyleToChild=function(bq){var bs=bq.txtarea.getElementsByTagName("div");if(bs.length==0){bs=bq.txtarea.getElementsByTagName("p")}var bt=getComputedStyle(bq.txtarea,null);for(var br=0;br<bs.length;br++){var p=getComputedStyle(bs[br],null);if(p.getPropertyValue("color")!=bt.getPropertyValue("color")){bs[br].style.color=bq.txtarea.style.color}if(p.getPropertyValue("font-family")!=bt.getPropertyValue("font-family")){bs[br].style.fontFamily=bq.txtarea.style.fontFamily}if(p.getPropertyValue("font-size")!=bt.getPropertyValue("font-size")){bs[br].style.fontSize=bq.txtarea.style.fontSize}if(p.getPropertyValue("font-style")!=bt.getPropertyValue("font-style")){bs[br].style.fontStyle=bq.txtarea.style.fontStyle}if(p.getPropertyValue("font-weight")!=bt.getPropertyValue("font-weight")){bs[br].style.fontWeight=bq.txtarea.style.fontWeight}if(p.getPropertyValue("text-align")!=bt.getPropertyValue("text-align")){bs[br].style.textAlign=bq.txtarea.style.textAlign}if(p.getPropertyValue("text-transform")!=bt.getPropertyValue("text-transform")){bs[br].style.textTransform=bq.txtarea.style.textTransform}}};this.getBubblesData=function(){var i=ai.isReadonly();if(!ac){ai.setReadonly(false);if(i){ai.setReadonly(i)}}if(ac){return ac.getBubbles(aS)}else{return""}};function X(){aS=document.getElementById(a2);if(!aS){throw"Element doesn't exist"}an=aS.offsetWidth;ar=aS.offsetHeight;ax=document.createElement("div");ax.id=a2+"-comic-bubbles-wrapper";ax.className="comic-bubbles-wrapper";var bt="relative",bq=0,by="auto",bA=0,br="auto",bB="none",bu=0,bs=0,p=0,bz=0;if(window.getComputedStyle){bt=f(aS,"position");bq=f(aS,"left");by=f(aS,"right");bA=f(aS,"top");br=f(aS,"bottom");bB=f(aS,"float");bu=f(aS,"margin-left");bs=f(aS,"margin-right");p=f(aS,"margin-top");bz=f(aS,"margin-bottom");if(bt=="static"){bt="relative"}aS.style.position="static";aS.style.marginLeft=0;aS.style.marginRight=0;aS.style.marginTop=0;aS.style.marginBottom=0}ax.style.cssText="width: "+an+"px !important; height: "+ar+"px !important; float: "+bB+" !important; position: "+bt+" !important; right: "+by+" !important; bottom: "+br+" !important; left: "+bq+" !important; top: "+bA+" !important; display: inline-block !important; visibility: visible !important; border: 0; padding: 0 !important; overflow: hidden; margin-left: "+bu+" !important; margin-right: "+bs+" !important; margin-top: "+p+" !important; margin-bottom: "+bz+" !important";aR=aS.parentNode;aR.insertBefore(ax,aS);ax.appendChild(aS);a4=document.createElement("canvas");a4.id=a2+"-comic-bubbles";a4.width=an;a4.height=ar;a4.style.cssText="width: auto !important; height: auto !important; position: absolute !important; right: auto !important; bottom: auto !important; left: 0 !important; top: 0 !important; display: block !important; visibility: visible !important; border: 0 !important; margin: 0 !important; padding: 0 !important";if(aN){ah=22;ap=2}ax.appendChild(a4);au=a4.getContext("2d");au.font=aG+" "+D+" "+aK+" "+aP;for(var bv=0;bv<9;bv++){var bw=new J();P.push(bw)}ad(true);a1=document.createElement("p");a1.style.cssText=aE(null,null,null,null,null,"-9999px","-9999px","auto","auto","hidden","center");a1.style.visibility="hidden";a1.id=a2+"-temp-bubble-container";a1.className="cb-bubble-field";a7(true);if("pointerEvents" in a1.style){a9=true}var bx=document.getElementById("comic-bubbles-style");if(!bx){bx=document.createElement("style");bx.type="text/css";bx.id="comic-bubbles-style";document.getElementsByTagName("head")[0].appendChild(bx);var bC=".comic-bubbles-wrapper .cb-bubble-field { -moz-box-sizing: border-box !important; -webkit-box-sizing: border-box !important; box-sizing: border-box !important; padding: 1px; line-height: normal; }\n";bC+=".comic-bubbles-wrapper .cb-bubble-field .wrap { display: inline !important; position: static !important; margin: 0 !important; padding: 0 !important; border: 0 !important; text-transform: inherit !important; font-family: inherit !important; font-size: inherit !important; font-style: inherit !important; font-weight: inherit !important; }\n";bC+=".comic-bubbles-wrapper .cb-bubble-field p, .comic-bubbles-wrapper .cb-bubble-field div { margin: 0 !important; padding: 0 !important; background: transparent !important; line-height: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-weight: inherit; text-align: inherit; }\n";bC+=".comic-bubbles-wrapper .cb-bubble-field.clickable { cursor: pointer; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }\n";bC+=".comic-bubbles-wrapper, .comic-bubbles-wrapper img { -khtml-user-select: none; -o-user-select: none; -moz-user-select: none; -webkit-user-select: none; user-select: none; }\n";bx.appendChild(document.createTextNode(bC))}}function C(bt,bu){if(bt.ellipse){e(au,bt.x+bt.width/2,bt.y+bt.height/2,bt.width/2*Math.sqrt(2),bt.height/2*Math.sqrt(2),bu,bt.bubbleStyle,bt);var p=12,i=18,bq,bs,br=8;if(bt.width>bt.height){if(0.25*bt.height>p){p=0.25*bt.height}if(0.35*bt.height>i){i=0.35*bt.height}}else{if(0.25*bt.width>p){p=0.25*bt.width}if(0.35*bt.width>i){i=0.35*bt.width}}if(bt.bubbleStyle==3){p=p/2;i=i/2}if(bt.tailLocation==0){bq=bt.x+i;bs=bt.y+i;if(bt.x+bt.width<bq){bq=bt.x+bt.width}if(bt.y+bt.height<bs){bs=bt.y+bt.height}aJ(au,bt.x,bs,bq,bt.y,bt.tailX0,bt.tailY0,bt.bubbleStyle,bu,bt.x+br,bt.y+br,bt.tailLocation);P[8].x=bt.tailX0-ah/2;P[8].y=bt.tailY0-ah/2}else{if(bt.tailLocation==1){if(bt.width<bi+4){p=p-2}bq=bt.x+bt.width/2-p;bs=bt.x+bt.width/2+p;if(bt.width<bs-bq){bq=bt.x;bs=bt.x+bt.width}aJ(au,bq,bt.y,bs,bt.y,bt.tailX1,bt.tailY1,bt.bubbleStyle,bu,bt.x+bt.width/2,bt.y-br/2,bt.tailLocation);P[8].x=bt.tailX1-ah/2;P[8].y=bt.tailY1-ah/2}else{if(bt.tailLocation==2){bq=bt.x+bt.width-i;bs=bt.y+i;if(bt.x>bq){bq=bt.x}if(bt.y+bt.height<bs){bs=bt.y+bt.height}aJ(au,bq,bt.y,bt.x+bt.width,bs,bt.tailX2,bt.tailY2,bt.bubbleStyle,bu,bt.x+bt.width-br,bt.y+br,bt.tailLocation);P[8].x=bt.tailX2-ah/2;P[8].y=bt.tailY2-ah/2}else{if(bt.tailLocation==3){if(bt.height<bi+4){p=p-2}bq=bt.y+bt.height/2-p;bs=bt.y+bt.height/2+p;if(bt.height<bs-bq){bq=bt.y;bs=bt.y+bt.height}aJ(au,bt.x,bq,bt.x,bs,bt.tailX3,bt.tailY3,bt.bubbleStyle,bu,bt.x-br/2,bt.y+bt.height/2,bt.tailLocation);P[8].x=bt.tailX3-ah/2;P[8].y=bt.tailY3-ah/2}else{if(bt.tailLocation==4){if(bt.height<bi+4){p=p-2}bq=bt.y+bt.height/2-p;bs=bt.y+bt.height/2+p;if(bt.height<bs-bq){bq=bt.y;bs=bt.y+bt.height}aJ(au,bt.x+bt.width,bq,bt.x+bt.width,bs,bt.tailX4,bt.tailY4,bt.bubbleStyle,bu,bt.x+bt.width+br/2,bt.y+bt.height/2,bt.tailLocation);P[8].x=bt.tailX4-ah/2;P[8].y=bt.tailY4-ah/2}else{if(bt.tailLocation==5){bq=bt.y+bt.height-i;bs=bt.x+i;if(bt.y>bq){bq=bt.y}if(bt.x+bt.width<bs){bs=bt.x+bt.width}aJ(au,bt.x,bq,bs,bt.y+bt.height,bt.tailX5,bt.tailY5,bt.bubbleStyle,bu,bt.x+br,bt.y+bt.height-br,bt.tailLocation);P[8].x=bt.tailX5-ah/2;P[8].y=bt.tailY5-ah/2}else{if(bt.tailLocation==6){if(bt.width<bi+4){p=p-2}bq=bt.x+bt.width/2-p;bs=bt.x+bt.width/2+p;if(bt.width<bs-bq){bq=bt.x;bs=bt.x+bt.width}aJ(au,bq,bt.y+bt.height,bs,bt.y+bt.height,bt.tailX6,bt.tailY6,bt.bubbleStyle,bu,bt.x+bt.width/2,bt.y+bt.height+br/2,bt.tailLocation);P[8].x=bt.tailX6-ah/2;P[8].y=bt.tailY6-ah/2}else{if(bt.tailLocation==7){bq=bt.x+bt.width-i;bs=bt.y+bt.height-i;if(bt.x>bq){bq=bt.x}if(bt.y>bs){bs=bt.y}aJ(au,bq,bt.y+bt.height,bt.x+bt.width,bs,bt.tailX7,bt.tailY7,bt.bubbleStyle,bu,bt.x+bt.width-br,bt.y+bt.height-br,bt.tailLocation);P[8].x=bt.tailX7-ah/2;P[8].y=bt.tailY7-ah/2}}}}}}}}}else{z(au,bt.x,bt.y,bt.width,bt.height,bu)}}function e(b1,bz,by,bH,bG,bQ,bE,bA){if(bE==3){b1.beginPath();var bF=5,bz=bA.x-bF,by=bA.y-bF,bB=bA.width+bF*2,bI=bA.height+bF*2;var bO=bz+bB,bZ=by+bI,bq=6;b1.moveTo(bz+bq,by);b1.lineTo(bO-bq,by);b1.quadraticCurveTo(bO,by,bO,by+bq);b1.lineTo(bO,by+bI-bq);b1.quadraticCurveTo(bO,bZ,bO-bq,bZ);b1.lineTo(bz+bq,bZ);b1.quadraticCurveTo(bz,bZ,bz,bZ-bq);b1.lineTo(bz,by+bq);b1.quadraticCurveTo(bz,by,bz+bq,by)}else{if(bE==2){var bR=180,bL=[],bD=[],bT=[],bx=Math.PI/bR;var bS=20,bN=15,bM=0;if(bA.width>bA.height){if(bA.width>50){bS=25}if(bA.width>100){bS=30;bN=bA.width/6;if(bN>bA.height/2){bN=bA.height/2}}}else{if(bA.height>100){bS=25}if(bA.height>100){bS=30;bN=bA.height/6;if(bN>bA.width/2){bN=bA.width/2}}}for(var bP=0;bP<bR*2;bP++){var b0=bz,bZ=by,bW=0,bu=Math.sin(bP*bx)*0.9,bC=Math.cos(bP*bx)*0.9;b0=bH*bC+bz;bZ=bG*bu+by;bL.push({x:b0,y:bZ})}for(var bU=0;bU<bL.length;bU++){var bw=bL[bU].x,b4=bL[bU].y;var bt=bL[0].x,b2=bL[0].y;if(bU+1<bL.length){bt=bL[bU+1].x;b2=bL[bU+1].y}var b0=Math.abs(b4-b2),bZ=Math.abs(bw-bt);var bW=Math.sqrt(Math.pow(b0,2)+Math.pow(bZ,2));if(bU==0){bD.push({x:bw,y:b4})}bM=bM+bW;if(bM>bN){bD.push({x:bw,y:b4});bM=0}}for(var bU=0;bU<bD.length;bU++){var bw=bD[bU].x,b4=bD[bU].y;var bv=0,b3=0;var bt=bD[0].x,b2=bD[0].y;if(bU+1<bD.length){bt=bD[bU+1].x;b2=bD[bU+1].y}var bs=(bw+bt)/2,bY=(b4+b2)/2;var b0=Math.abs(b4-b2),bZ=Math.abs(bw-bt);var bW=Math.sqrt(Math.pow(b0,2)+Math.pow(bZ,2));var bR=1,bX=by-bA.height/2,br=by+bA.height/2;var bJ=bz-bA.width/2,bK=bz+bA.width/2;if(bA.width>bA.height){if(bY<bX+5||bY>br-5){if(bU%4==0){bR=1.3}}else{bR=0.8}}else{if(bs<bJ+5||bs>bK-5){if(bU%4==0){bR=1.3}}else{bR=0.8}}if(bs>bz){bv=bs+(b0/bW*bS*bR)}else{bv=bs-(b0/bW*bS*bR)}if(bY<by){b3=bY-(bZ/bW*bS*bR)}else{b3=bY+(bZ/bW*bS*bR)}if(bW>bN/2){bT.push({x:bw,y:b4});bT.push({x:bv,y:b3})}}b1.beginPath();b1.moveTo(bT[0].x,bT[0].y);for(var bU=1;bU<bT.length;bU++){b1.lineTo(bT[bU].x,bT[bU].y)}b1.closePath()}else{b1.save();b1.beginPath();b1.translate(bz-bH,by-bG);b1.scale(bH,bG);b1.arc(1,1,1,0,2*Math.PI,false);if(ai.mousePressed&&bQ!=ae){if(bE!=0){b1.fill()}b1.restore();return}b1.restore()}}if(aj.length>0){aj[bQ].frame=false}if((ae==bQ)||((b1.isPointInPath(ai.mouseX,ai.mouseY))||(b1.isPointInPath(ai.mX,ai.mY)&&ai.mousePressed))){if(a4.style.cursor=="auto"&&O){ae=bQ}if(aj.length>0){aj[bQ].frame=true}}if(bE!=0&&bE!=2&&bE!=3){b1.fill()}try{if(ae>-1){ai.selectedBubbleID=aj[ae].txtarea.id}}catch(bV){}}function u(bq,p,bu,bt,bs){var i=bt,br=bs;bq.moveTo(p,bu-br/2);bq.bezierCurveTo(p+i/2,bu-br/2,p+i/2,bu+br/2,p,bu+br/2);bq.bezierCurveTo(p-i/2,bu+br/2,p-i/2,bu-br/2,p,bu-br/2)}function W(bu,bB,bq,by,p,bx,i,bv,bA,br,bz){if(bB==1){bu.moveTo(p,bx);bu.lineTo(bq,by)}else{bu.moveTo(bq,by);bu.lineTo(p,bx)}if(bA==0||bA==2){bu.lineTo(i,bv)}else{var bt=Math.atan2(bv-bz,i-br),bw=20,bs=6;bu.lineTo(i,bv);bu.moveTo(i,bv);bu.lineTo(i-bw*Math.cos(bt-Math.PI/bs),bv-bw*Math.sin(bt-Math.PI/bs));bu.lineTo(i-bw*Math.cos(bt+Math.PI/bs),bv-bw*Math.sin(bt+Math.PI/bs));bu.lineTo(i,bv);bu.lineTo(i-bw*Math.cos(bt-Math.PI/bs),bv-bw*Math.sin(bt-Math.PI/bs))}}function aJ(bU,bB,bY,bA,bX,bz,bV,bG,bO,bC,p,bW){if(bG==0||bG==2||bG==3){var bN=0;if(bW==0){bN=1;if(bz<bA){if((bA-bz)<(bV-bX)){bN=2}}else{if((bz-bA)>(bX-bV)){bN=2}}}else{if(bW==1){if(bV<bY){bN=1}else{bN=2}}else{if(bW==2){bN=1;if(bz>bB){if((bz-bB)<(bV-bY)){bN=2}}else{if((bB-bz)>(bY-bV)){bN=2}}}else{if(bW==4){if(bz>bB){bN=1}else{bN=2}}else{if(bW==3){if(bz<bB){bN=2}else{bN=1}}else{if(bW==5){bN=2;if(bz<bA){if((bA-bz)<(bX-bV)){bN=1}}else{if((bz-bA)>(bV-bX)){bN=1}}}else{if(bW==6){if(bV>bY){bN=2}else{bN=1}}else{if(bW==7){bN=2;if(bz>bB){if((bz-bB)<(bY-bV)){bN=1}}else{if((bB-bz)>(bV-bY)){bN=1}}}}}}}}}}W(bU,bN,bB,bY,bA,bX,bz,bV,bG,bC,p)}else{if(bG==1){bU.beginPath();var bI=aj[bO];var bQ=bI.width*R;var bM=bI.height*R;var bT=0,bS=0,bR=0,bs=0,bE=0,bK=0,bv=0,bP=1,bw=14;bS=Math.abs(bC-bz);bT=bV-p;bR=Math.sqrt(Math.pow(bT,2)+Math.pow(bS,2));var bF=Math.abs(bS/bT*bM);var bt=Math.sqrt(Math.pow(bM,2)+Math.pow(bF,2));if(bF>bQ){bF=Math.abs(bT/bS*bQ);bt=Math.sqrt(Math.pow(bQ,2)+Math.pow(bF,2))}if(bQ>bM){if(bw<bQ){bw=bQ}}else{if(bw<bM){bw=bM}}bs=bt+bw;bE=bs;while(bE<bR){bP++;bE=bP*bs}var by=bP-1,bD=bQ/2*Math.sqrt(2),bJ=bM/2*Math.sqrt(2);var bu=bD*0.5,bq=bJ*0.5;var bH=(bD-bu)/by,bL=(bJ-bq)/by;bP=1;bE=bs;while(bE<bR){bv=bT/bR*bE;bK=Math.sqrt(Math.pow(bE,2)-Math.pow(bv,2));bv=bv+p;if(bz<=bC){bK=bC-bK}else{bK=bC+bK}var br=bD-(bH*(bP-1)),bx=bJ-(bL*(bP-1));if(br<bD*0.35){br=bD*0.35;bx=bJ*0.35}u(bU,bK,bv,br*3,bx*2.25);bE=bE+(bs*br/bD);bP++}}}bU.closePath();if(bU.isPointInPath(ai.currentX,ai.currentY)&&bO==ae){ai.insideTail=true}else{ai.insideTail=false}bU.fill()}function z(br,bu,bt,bq,i,bs){var bv=2;var bx=bu-1;var bw=bt-1;var p=bq+2;var by=i+2;br.beginPath();br.rect(bx,bw,p,by);br.fill();if(ai.mousePressed&&bs!=ae){return}if(aj.length>0){aj[bs].frame=false}if((ae==bs)||((br.isPointInPath(ai.mouseX,ai.mouseY))||(br.isPointInPath(ai.mX,ai.mY)&&ai.mousePressed))){if(a4.style.cursor=="auto"){ae=bs}if(aj.length>0){aj[bs].frame=true}}if(ae>-1){ai.selectedBubbleID=aj[ae].txtarea.id}}function aw(bw){a7(true);a1.style.cssText=aE(bw.fontFamily,bw.fontSize,bw.fontStyle,bw.fontWeight,null,"-9999px","-9999px","auto","auto","hidden",bw.textAlign);a1.innerHTML="<img id='wg8100048293' src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7' style='position: static !important; float: none !important; display: inline !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: 0 !important; border: 0 !important; vertical-align: baseline !important'><span id='wg8100048294' class='wrap'>abc</span><br><span id='wg8100048295' class='wrap'>def</span>";var i=document.getElementById("wg8100048293");var bq=document.getElementById("wg8100048294");var p=document.getElementById("wg8100048295");if(i&&bq&&p){var br=i.offsetTop;var bt=bq.offsetTop;var bs=p.offsetTop;bw.baselineFromTop=br+1-bt;bw.lineHeight=bs-bt;var bv=f(a1,"text-transform")=="uppercase"?true:false;var bu=bw.txtarea.innerHTML.replace(/(<.*?>)|(&lt;|&gt;|&nbsp;|\ |.)/g,function(by,bx,bz){return bx||("<span class='wrap'>"+((bv&&bz!="&lt;"&&bz!="&gt;"&&bz!="&nbsp;")?bz.toUpperCase():bz)+"</span>")});a1.style.cssText=aE(bw.fontFamily,bw.fontSize,bw.fontStyle,bw.fontWeight,null,"-9999px","-9999px",bw.width+"px","auto","hidden",bw.textAlign);a1.innerHTML=bu;a1.setAttribute("data-txt-id",bw.txtarea.id);aO(bw)}}this.prepareText=function(i){aw(i)};this.removeCanvas=function(){if(aS&&aR){aR.insertBefore(aS,ax);aR.removeChild(ax)}if(bn){bn.innerHTML=""}};function aO(bE){a7(true);if(bE.txtarea.id!=a1.getAttribute("data-txt-id")){aw(bE)}a1.style.cssText=aE(bE.fontFamily,bE.fontSize,bE.fontStyle,bE.fontWeight,null,"-9999px","-9999px",bE.width+"px","auto","hidden",bE.textAlign);var bD=bE.y+bE.height;bE.lettersCoordinates=[];var bx=a1.getElementsByClassName("wrap");var by=0,bw=0;for(bu=0;bu<bx.length;bu++){var bs=bx[bu].innerText||bx[bu].textContent;var bC=bx[bu].offsetLeft+bE.x;var bz=bx[bu].offsetTop+bE.y+bE.baselineFromTop;if(bz<bD){if(bs!=" "){bE.lettersCoordinates.push({letter:bs,x:bx[bu].offsetLeft,y:bx[bu].offsetTop})}if(bC>by){by=bC}if(bz>bw){bw=bz}}}a1.style.cssText=aE(bE.fontFamily,bE.fontSize,bE.fontStyle,bE.fontWeight,null,"-9999px","-9999px","auto","auto","hidden",bE.textAlign);a1.style.paddingTop=0;a1.style.lineHeight=1;var br=a1.getElementsByTagName("span");for(var bu=0;bu<br.length;bu++){br[bu].style.paddingTop=0;br[bu].style.lineHeight=1}var bB=a1.getElementsByClassName("wrap"),bA=0,bq=1,bv="";for(bu=0;bu<bB.length;bu++){var bs=bB[bu].innerHTML;var bz=bB[bu].offsetTop;if(bz==bq){bv+=bs}else{current_y=bz;var bt=(current_y/bE.lineHeight)-bA,p="";for(j=0;j<bt;j++){p+="<br>";bA++}bv+=p+bs;bq=bz}}bE.consoleText=bv}function bo(i){if(!a9||Z||ai.png_in_progress){if(i.lettersCoordinates.length>0){for(l=0;l<i.lettersCoordinates.length;l++){au.fillText(i.lettersCoordinates[l]["letter"],i.lettersCoordinates[l]["x"]+i.x,i.lettersCoordinates[l]["y"]+i.y+i.baselineFromTop)}}c++}}function ba(i){return(navigator.userAgent.toLowerCase().indexOf(i.toLowerCase())!=-1)}function w(bs,br){bs=bs.replace(/#/g,"");bs=(bs+bs+bs).substr(0,6);var bt=parseInt(bs,16);var bq=(bt>>16)&255;var p=(bt>>8)&255;var i=bt&255;return"rgba("+bq+","+p+","+i+","+br+")"}function L(p){p=p.replace(/#/g,"");var bq=parseInt(p,16);var i=(bq>>16)&255;return i}function S(p){p=p.replace(/#/g,"");var bq=parseInt(p,16);var i=(bq>>8)&255;return i}function V(p){p=p.replace(/#/g,"");var bq=parseInt(p,16);var i=bq&255;return i}function U(){try{X()}catch(i){alert(i)}}function az(p){var i=p,br=true;for(var bq=0;bq<bp.length;bq++){if(bp[bq].indexOf(i.split(",")[0])>-1){i=bp[bq];br=false;break}}if(br){i=bp[0]}return i}function a(i){var p=isNaN(parseInt(i))?aK:parseInt(i);if(p<8){p="8px"}else{if(p>50){p="50px"}else{p=parseInt(p)+"px"}}return p}function aW(i){var p=i;if(p!="normal"&&p!="italic"){p="normal"}return p}function g(i){var p=i;if(p!="normal"&&p!="bold"){p="normal"}return p}function Q(p){var i=p;if(i!="left"&&i!="center"&&i!="right"&&i!="justify"){i="left"}return i}function bg(p){var bq=p?p.toLowerCase():"";if(aI[bq]===undefined){var i=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(bq);if(!i){bq=null}}else{bq=aI[bq]}return bq}function H(i){var p=(i!==null)?i+"":"";return p.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/gi,"<br>").replace(/\ \ /g,"&nbsp; ").replace(/\ \ /g," &nbsp;")}this.CBName=function(){return Y.callee.toString().match(/function ([^\(]+)/)[1].toLowerCase()};function f(p,i){return getComputedStyle(p,null).getPropertyValue(i)}function aF(bq,p){a7(true);a1.style.width="auto";a1.style.height="auto";a1.innerHTML="test";var bt=a1.clientHeight;a1.style.cssText=aE(bq.fontFamily,bq.fontSize,bq.fontStyle,bq.fontWeight,null,"-9999px","-9999px",bq.width+"px","auto","hidden",bq.textAlign);a1.innerHTML=bq.txtarea.innerHTML;var bs=a1.offsetHeight;if(bs-p>bt-5){var bu=bq.width;for(var br=1;br<100;br++){a1.style.width=(bu+br)+"px";if(a1.offsetHeight!=bs){bq.width=a1.offsetWidth;break}}}}function y(){for(var i in aA){if(aA.hasOwnProperty(i)){G[i]=aA[i]}}}function F(){if(document.getElementById(a2+"-comic-bubbles-wrapper")){var bq=document.getElementById(a2);var i=document.getElementById(a2+"-comic-bubbles-wrapper");var p=i.parentNode;p.insertBefore(bq,i);p.removeChild(i)}}F();if(!document.getElementById(a2+"-comic-bubbles-wrapper")&&ai["CBN"+parseInt(6302).toString(24)]()=="comicbubbles"){U();y();var o={},ag;for(var aq=0;aq<arguments.length;aq++){if(typeof arguments[aq]==="object"){if("canvas" in arguments[aq]){o=arguments[aq].canvas||o}if("bubble" in arguments[aq]){ag=arguments[aq].bubble||ag}}}if(Object.keys(o).length>0){for(var af in o){if(typeof o[af]==="string"||o[af] instanceof String){o[af]=o[af].trim()}}var aD=o["font-family"]||o.fontFamily||aP;if(aD!=aP){aA.fontFamily=aP=az(aD)}var t=o["font-size"]||o.fontSize||aK;if(t!=aK){aA.fontSize=aK=a(t)}var am=o["font-style"]||o.fontStyle||aG;if(am!=aG){aA.fontStyle=aG=aW(am)}var v=o["font-weight"]||o.fontWeight||D;if(v!=D){aA.fontWeight=D=g(v)}var q=o["text-align"]||o.textAlign||A;if(q!=A){aA.textAlign=A=Q(q)}var aM=o["background-color"]||o.backgroundColor||o.background||bh;if(aM!=bh){aA.bgColor=bh=bg(aM)||bh}var aL=o.color||n;if(aL!=n){aA.txtColor=n=bg(aL)||n}if("text" in o){k=H(o.text)}if("opacity" in o){a3("opacity",o.opacity,null);aA.opacity=E}if("readonly" in o){a3("readonly",o.readonly,null);aA.readonly=a5}if("settable" in o){a3("settable",o.settable,null);aA.settable=T}if("width" in o){if(o.width!="auto"){a3("width",o.width,null);aA.bubbleWidth=aB}else{aC=true}}if("height" in o){if(o.height!="auto"){a3("height",o.height,null);aA.bubbleHeight=m}else{aX=true}}if("textDrawing" in o){if(o.textDrawing){Z=true}else{Z=false}}if("bubbleStyle" in o){var ay=o.bubbleStyle||"none";var aV=be(ay);if(aV!=-1){av=true}aA.bubbleStyle=N=aV}}if(typeof ag==="object"&&Object.prototype.toString.call(ag)!=="[object Array]"){ag=[ag]}if(Object.prototype.toString.call(ag)==="[object Array]"){for(var aq=0;aq<ag.length;aq++){bd(ag[aq])}setTimeout(function(){ad(true)},100)}}function bd(p){var bz=new aY();if("x" in p){a3("x",p.x,bz)}else{if("X" in p){a3("x",p.X,bz)}}if("y" in p){a3("y",p.y,bz)}else{if("Y" in p){a3("y",p.Y,bz)}}if("text" in p){bz.txtarea.innerHTML=H(p.text)}aj.push(bz);var by=new Date().getTime()+aj.length;bz.id="b"+by;bz.txtarea.id=a2+"-"+by;var br=p["font-family"]||p.fontFamily||aP;if(br!=aP){bz.fontFamily=az(br)}var bA=p["font-size"]||p.fontSize||aK;if(bA!=aK){bz.fontSize=a(bA)}var i=p["font-style"]||p.fontStyle||aG;if(i!=aG){bz.fontStyle=aW(i)}var bt=p["font-weight"]||p.fontWeight||D;if(bt!=D){bz.fontWeight=g(bt)}var bB=p["text-align"]||p.textAlign||A;if(bB!=A){bz.textAlign=Q(bB)}var bx=p["background-color"]||p.backgroundColor||p.background||bh;if(bx!=bh){bz.fill=bg(bx)||bh}var bw=p.color||n;if(bw!=n){bz.color=bg(bw)||n}if("bubbleStyle" in p){bz.bubbleStyle=be(p.bubbleStyle)}if("opacity" in p){a3("opacity",p.opacity,bz)}if("readonly" in p){a3("readonly",p.readonly,bz)}if("settable" in p){a3("settable",p.settable,bz)}if("visible" in p){a3("visible",p.visible,bz)}if("id" in p){if(I(bz,p.id)){bz.txtarea.id=a2+"-"+p.id}}if("name" in p){bz.name=p.name}if("width" in p){if(p.width=="auto"){bz.autoWidth=true;var bu=x(bz);bz.width=bu.width}else{bz.autoWidth=false;a3("width",p.width,bz);var bq=m;if("height" in p&&p.height!="auto"){if(parseInt(p.height)>=bi){bq=parseInt(p.height)}}if(bq!="auto"){aF(bz,bq)}}}else{if(aC){bz.autoWidth=true;var bu=x(bz);bz.width=bu.width}}if("height" in p){if(p.height=="auto"){bz.autoHeight=true;var bu=x(bz);bz.height=bu.height}else{bz.autoHeight=false;a3("height",p.height,bz)}}else{if(aX){bz.autoHeight=true;var bu=x(bz);bz.height=bu.height}}if("bubbleStyle" in p){var bs=p.bubbleStyle||"none";var bv=be(bs);if(bv!=-1){bz.ellipse=true}bz.bubbleStyle=bv}if("tailLocation" in p||bz.ellipse){var bC=p.tailLocation||"se";bz.tailLocation=bf(bC);bz["tailX"+bz.tailLocation]=s(bz);bz["tailY"+bz.tailLocation]=r(bz);if("tailX" in p){a3("tailX",p.tailX,bz)}if("tailY" in p){a3("tailY",p.tailY,bz)}}return bz}}function DestroyComicBubbles(a){if(typeof a==="object"&&typeof a.removeCanvas==="function"){a.removeCanvas();a=null;delete a}};
